{"ast":null,"code":"// API base\nconst API = process.env.REACT_APP_BACKEND_URL || \"http://localhost:3001\";\n\n// Headers helper (no forzamos Content-Type si es FormData)\nfunction buildHeaders(extra = {}, body) {\n  const headers = {\n    ...extra\n  };\n  const token = sessionStorage.getItem(\"token\");\n  if (!(body instanceof FormData)) headers[\"Content-Type\"] = \"application/json\";\n  if (token) headers[\"Authorization\"] = `Bearer ${token}`;\n  return headers;\n}\n\n// Fetch helper\nasync function jsonFetch(path, {\n  method = \"GET\",\n  body = null,\n  headers = {}\n} = {}) {\n  const opts = {\n    method,\n    headers: buildHeaders(headers, body)\n  };\n  if (body) opts.body = body instanceof FormData ? body : JSON.stringify(body);\n  const res = await fetch(`${API}${path}`, opts);\n  if (!res.ok) {\n    const text = await res.text().catch(() => \"\");\n    throw new Error(`HTTP ${res.status} ${res.statusText} :: ${text}`);\n  }\n  const ct = res.headers.get(\"content-type\") || \"\";\n  if (!ct.includes(\"application/json\")) return null;\n  return res.json();\n}\n\n// ==== Auth ====\nexport async function apiLogin({\n  email,\n  password,\n  rol\n}) {\n  return jsonFetch(\"/api/login\", {\n    method: \"POST\",\n    body: {\n      email,\n      password,\n      rol\n    }\n  });\n}\n\n// ==== Productos ====\nexport async function listProductos(qs = \"\") {\n  const suffix = qs ? `?${qs}` : \"\";\n  return jsonFetch(`/api/productos${suffix}`, {\n    method: \"GET\"\n  });\n}\nexport async function getProducto(id) {\n  return jsonFetch(`/api/productos/${id}`, {\n    method: \"GET\"\n  });\n}\nexport async function createProducto(payload) {\n  return jsonFetch(`/api/productos`, {\n    method: \"POST\",\n    body: payload\n  });\n}\nexport async function updateProducto(id, payload) {\n  return jsonFetch(`/api/productos/${id}`, {\n    method: \"PUT\",\n    body: payload\n  });\n}\nexport async function deleteProducto(id) {\n  return jsonFetch(`/api/productos/${id}`, {\n    method: \"DELETE\"\n  });\n}\n\n// ==== Proveedores ====\nexport async function listProveedores() {\n  return jsonFetch(`/api/proveedores`, {\n    method: \"GET\"\n  });\n}\nexport async function createProveedor(payload) {\n  return jsonFetch(`/api/proveedores`, {\n    method: \"POST\",\n    body: payload\n  });\n}\nexport async function updateProveedor(id, payload) {\n  return jsonFetch(`/api/proveedores/${id}`, {\n    method: \"PUT\",\n    body: payload\n  });\n}\nexport async function deleteProveedor(id) {\n  return jsonFetch(`/api/proveedores/${id}`, {\n    method: \"DELETE\"\n  });\n}\n\n// ==== Entradas / Salidas ====\nexport async function registrarEntrada(payload) {\n  return jsonFetch(`/api/registro-entrada`, {\n    method: \"POST\",\n    body: payload\n  });\n}\nexport async function resumenEntradas(params = \"\") {\n  const suffix = params ? `?${params}` : \"\";\n  return jsonFetch(`/api/registro-entrada${suffix}`, {\n    method: \"GET\"\n  });\n}\nexport async function registrarSalida(payload) {\n  return jsonFetch(`/api/registro-salida`, {\n    method: \"POST\",\n    body: payload\n  });\n}\nexport async function historialSalidas(params = \"\") {\n  const suffix = params ? `?${params}` : \"\";\n  return jsonFetch(`/api/salidas${suffix}`, {\n    method: \"GET\"\n  });\n}","map":{"version":3,"names":["API","process","env","REACT_APP_BACKEND_URL","buildHeaders","extra","body","headers","token","sessionStorage","getItem","FormData","jsonFetch","path","method","opts","JSON","stringify","res","fetch","ok","text","catch","Error","status","statusText","ct","get","includes","json","apiLogin","email","password","rol","listProductos","qs","suffix","getProducto","id","createProducto","payload","updateProducto","deleteProducto","listProveedores","createProveedor","updateProveedor","deleteProveedor","registrarEntrada","resumenEntradas","params","registrarSalida","historialSalidas"],"sources":["/workspaces/special-wash/src/api.js"],"sourcesContent":["// API base\nconst API = process.env.REACT_APP_BACKEND_URL || \"http://localhost:3001\";\n\n// Headers helper (no forzamos Content-Type si es FormData)\nfunction buildHeaders(extra = {}, body) {\n  const headers = { ...extra };\n  const token = sessionStorage.getItem(\"token\");\n  if (!(body instanceof FormData)) headers[\"Content-Type\"] = \"application/json\";\n  if (token) headers[\"Authorization\"] = `Bearer ${token}`;\n  return headers;\n}\n\n// Fetch helper\nasync function jsonFetch(path, { method = \"GET\", body = null, headers = {} } = {}) {\n  const opts = { method, headers: buildHeaders(headers, body) };\n  if (body) opts.body = body instanceof FormData ? body : JSON.stringify(body);\n\n  const res = await fetch(`${API}${path}`, opts);\n  if (!res.ok) {\n    const text = await res.text().catch(() => \"\");\n    throw new Error(`HTTP ${res.status} ${res.statusText} :: ${text}`);\n  }\n  const ct = res.headers.get(\"content-type\") || \"\";\n  if (!ct.includes(\"application/json\")) return null;\n  return res.json();\n}\n\n// ==== Auth ====\nexport async function apiLogin({ email, password, rol }) {\n  return jsonFetch(\"/api/login\", { method: \"POST\", body: { email, password, rol } });\n}\n\n// ==== Productos ====\nexport async function listProductos(qs = \"\") {\n  const suffix = qs ? `?${qs}` : \"\";\n  return jsonFetch(`/api/productos${suffix}`, { method: \"GET\" });\n}\nexport async function getProducto(id) {\n  return jsonFetch(`/api/productos/${id}`, { method: \"GET\" });\n}\nexport async function createProducto(payload) {\n  return jsonFetch(`/api/productos`, { method: \"POST\", body: payload });\n}\nexport async function updateProducto(id, payload) {\n  return jsonFetch(`/api/productos/${id}`, { method: \"PUT\", body: payload });\n}\nexport async function deleteProducto(id) {\n  return jsonFetch(`/api/productos/${id}`, { method: \"DELETE\" });\n}\n\n// ==== Proveedores ====\nexport async function listProveedores() {\n  return jsonFetch(`/api/proveedores`, { method: \"GET\" });\n}\nexport async function createProveedor(payload) {\n  return jsonFetch(`/api/proveedores`, { method: \"POST\", body: payload });\n}\nexport async function updateProveedor(id, payload) {\n  return jsonFetch(`/api/proveedores/${id}`, { method: \"PUT\", body: payload });\n}\nexport async function deleteProveedor(id) {\n  return jsonFetch(`/api/proveedores/${id}`, { method: \"DELETE\" });\n}\n\n// ==== Entradas / Salidas ====\nexport async function registrarEntrada(payload) {\n  return jsonFetch(`/api/registro-entrada`, { method: \"POST\", body: payload });\n}\nexport async function resumenEntradas(params = \"\") {\n  const suffix = params ? `?${params}` : \"\";\n  return jsonFetch(`/api/registro-entrada${suffix}`, { method: \"GET\" });\n}\nexport async function registrarSalida(payload) {\n  return jsonFetch(`/api/registro-salida`, { method: \"POST\", body: payload });\n}\nexport async function historialSalidas(params = \"\") {\n  const suffix = params ? `?${params}` : \"\";\n  return jsonFetch(`/api/salidas${suffix}`, { method: \"GET\" });\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}